function originInfo(){var a=$("#infoDetail");a.find("p").show(),a.find("#roomPic").hide(),a.find("img").hide(),a.find(".room").empty()}function markActiveClass(a){$(".active").removeClass("active"),a.indexOf("D")>=0?($("#DL").addClass("active"),$("#pane1").addClass("active"),a.indexOf("1")>=0?($("#DL1").addClass("active"),tags[0]="DrexelFloor1"):a.indexOf("2")>=0?($("#DL2").addClass("active"),tags[0]="DrexelFloor2"):($("#DL3").addClass("active"),tags[0]="DrexelFloor3")):($("#PLC").addClass("active"),$("#pane2").addClass("active"),a.indexOf("1")>=0?($("#PLC1").addClass("active"),tags[0]="PostFloor1"):a.indexOf("2")>=0?($("#PLC2").addClass("active"),tags[0]="PostFloor2"):($("#PLC3").addClass("active"),tags[0]="PostFloor3"))}function setHashTag(){null!=tags[1]?location.hash=tags[0]+"&"+tags[1]:location.hash=tags[0]}function loadSvg(a){markActiveClass(a);var b=function(){var a=$(this).attr("id"),b=json[a];if(void 0!=b){var c=$("#infoDetail");c.find("p").hide(),c.find("#roomPic").show(),c.find("img").attr("src","images/"+b.picture).show(),$("#roomTitle").text(b.title);var d=b.detail;void 0!=d?$("#roomDetail").html(d):$("#roomDetail").empty();var e=b.further;if(void 0!=e){var f=$(e.link);f.text(e.click),$("#roomLink").html(f)}else $("#roomLink").empty()}};$.ajax("SVG/"+a,{dataType:"xml",type:"GET",success:function(a){var c=$(a).find("svg");if(c.attr("width","100%").attr("height","100%"),c.find("[id=active]").find("[id]").attr("class","act"),$("#svgdata").empty().append(c),originInfo(),null!=tags[1]){var d=$("#"+tags[1]);d.attr("class","act highlight"),b.call(d)}$(".act").on("click",function(){var a=$(".highlight");a.length>0?/(^|\s)highlight(\s|$)/.test($(this).attr("class"))?($(this).attr("class","act"),tags[1]=null):($(".highlight").attr("class","act"),$(this).attr("class","act highlight"),tags[1]=$(this).attr("id"),b.call($(this))):($(this).attr("class","act highlight"),tags[1]=$(this).attr("id"),b.call($(this))),setHashTag()}),$(".act").on("mouseenter",b),$(".act").on("mouseleave",function(){var a=$(".highlight");a.length>0?b.call($(".highlight")):originInfo()}),$("#active > a").on("click",function(a){a.preventDefault(),originInfo(),tags[1]=null,setHashTag();var b=$(this).attr("xlink:href");loadSvg(b)})}})}var json=null,tags=new Array;$(document).ready(function(){var a=location.hash;a=a.replace(/#*/,""),tags=a.split("&");var b=tags[0]||"DrexelFloor1";Modernizr.svg?Modernizr.flexbox?($.getJSON("rooms.json",function(a){json=a}),loadSvg(b+".svg"),$(".floor").on("click",function(a){a.preventDefault(),originInfo();var b=$(this).data("map");loadSvg(b+".svg"),tags[1]=null,setHashTag()})):(alert("flexbox is not supported."),$(".detail").height($("#svgdata").height())):($(".fill").removeClass("fill"),$(".main").hide(),$(".nosvgcontainer").show(),$(".nosvgcontainer > img").width($(".nosvgcontainer").width()),$(".floor").on("click",function(a){a.preventDefault();var b=$(this).data("map");markActiveClass(b),$(".nosvgcontainer").find("img").attr("src","pic/"+pic+".png")}))});